<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event-Driven Architecture Case Study | Eunmi Kong</title>
    <link rel="icon" type="image/png" href="IMG_1926.png">
    <link rel="apple-touch-icon" href="IMG_1926.png">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="style-sub.css">

</head>
<body>
    <div class="page" role="document">
        <div class="case-study-container">
            <a href="index.html#experience" class="back-link">
                ← Back to Portfolio
            </a>

            <div class="case-study-header">
                <h1 class="case-study-title">Point Expiration Issue Resolution</h1>
            </div>

            <div class="overview-box">
                <p>
                    This page describes how I identified and redesigned a flawed point expiration system that had accumulated long-standing inconsistencies over time.
                </p>
            </div>

            <div class="content-section">
                <h2>Problem</h2>
                <ul>
                    <li>Points were not being expired even after their expiration date.</li>
                    <li>The system determined expiration by comparing:</li>
                    <ul>
                        <li>total earned points</li>
                        <li>total spent points</li>
                        <li>expiration candidate points</li>
                    </ul>
                    <li>Logic used:</li>
                    <ul>
                        <li><code>(TotalEarnedPoints-TotalSpentPoints) ≥ExpirationCandidatePoints →Expire Otherwise →Do not expire</code></li>
                    </ul>
                    <li>Expiration candidates were processed by a monthly batch job running at 00:20 on the 1st of each month.</li>
                    <li>However, earning and spending history older than 13 months was moved to a backup database, making it impossible to accurately calculate expiration candidates using aggregated totals.</li>
                    <li>Tracing individual earning–spending mappings per user was structurally infeasible due to system design limitations.</li>
                </ul>
            </div>

            <div class="content-section">
                <h2>Root Cause</h2>
                <ul>
                    <li>Aggregation-based expiration logic depended on historical data that was no longer available in the primary database.</li>
                    <li>As a result, expired-but-unused points were incorrectly retained.</li>
                    <li>Monthly expiration timing also caused mismatches with external settlement systems.</li>
                </ul>
            </div>

            <div class="content-section">
                <h2>Solution</h2>
                    <ul>
                        <li>Changed the expiration batch job from monthly to daily execution.</li>
                        <li>Recalculated expiration candidates by:</li>
                        <ul>
                            <li> Re-importing relevant user history from the backup database</li>
                            <li> Recomputing expiration targets based on actual expiration dates</li>
                        </ul>
                        <li>Introduced a new expiration tracking table with explicit state columns:</li>
                        <ul>
                            <li>EARNED, SPENT, USED, EXPIRED, CANCELED</li>
                        </ul>
                        <li>Ensured that:</li>
                        <ul>
                            <li> Points are used in order of earliest expiration</li>
                            <li> Points are expired strictly by expiration date</li>
                        </ul>
                        <li>Expired all remaining points that should have already expired but were not previously processed.</li>
                    </ul>
            </div>

            <div class="content-section">
                <h2>Impact</h2>                
                    <ul>
                        <li> Recovered approximately ₩1B worth of expired points, reducing operational liability.</li>
                        <li> Eliminated user confusion by aligning actual expiration dates with daily expiration processing.</li>
                        <li> Resolved inconsistencies with external settlement systems caused by mismatched expiration timing. </li>
                        <li> Improved data reliability by replacing aggregation-based logic with expiration-date–driven state management. </li>
                        <li> Established a scalable foundation for future expiration and settlement-related features.</li>
                    </ul>
            </div>

            <div style="margin-top: 4rem; padding-top: 2rem; border-top: 2px solid #e2e8f0;">
                <a href="index.html#experience" class="back-link">
                    ← Back to Portfolio
                </a>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
